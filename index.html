<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AdRoast - Brutally Honest Ad Feedback for SaaS Founders</title>
  <meta name="description" content="Get a brutally honest AI roast of your ads â€” analyzed against YOUR specific ICP.">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-spin { animation: spin 1s linear infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    const Icon = ({ name, className = "w-5 h-5" }) => {
      const icons = {
        flame: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z" /></svg>,
        upload: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>,
        link: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>,
        fileText: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
        chevronRight: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" /></svg>,
        copy: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>,
        check: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>,
        alertCircle: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
        sparkles: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>,
        zap: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>,
        arrowRight: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg>,
        x: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>,
        rotateCcw: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>,
        users: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
        linkedin: <svg className={className} fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>,
        loader: <svg className={`${className} animate-spin`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>,
      };
      return icons[name] || null;
    };

    const EMAIL_CONFIG = { service_id: 'service_ywioabe', template_id: 'template_gtqow85', public_key: '964Wa83HevoEa5KnS', notify_email: 'marina.kogan@brandswithpurpose.us' };

    const validateLinkedIn = (url) => {
      if (!url) return { valid: false, error: 'LinkedIn URL is required' };
      if (!/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[\w-]{3,100}\/?$/i.test(url.trim())) {
        return { valid: false, error: url.includes('linkedin.com') ? 'Use your profile URL (linkedin.com/in/yourname)' : 'Enter a valid LinkedIn URL' };
      }
      return { valid: true };
    };

    const sendEmail = async (data) => {
      try {
        await fetch('https://api.emailjs.com/api/v1.0/email/send', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            service_id: EMAIL_CONFIG.service_id, template_id: EMAIL_CONFIG.template_id, user_id: EMAIL_CONFIG.public_key,
            template_params: { to_email: EMAIL_CONFIG.notify_email, subject: `ðŸ”¥ AdRoast: ${data.platform} | ${data.score}/10 | ${data.linkedin}`, message: `LinkedIn: ${data.linkedin}\nPlatform: ${data.platform}\nOffer: ${data.offer}\nICP: ${data.icp}\nScore: ${data.score}/10\nVerdict: ${data.verdict}\n\nHeadlines:\n${data.headlines.join('\n')}\n\nBody: ${data.body}\nCTAs: ${data.ctas.join(', ')}` }
          })
        });
      } catch (e) { console.error('Email error:', e); }
    };

    const getScoreColor = (s) => s <= 3 ? 'text-red-400 bg-red-500/20' : s <= 6 ? 'text-pink-400 bg-pink-500/20' : 'text-green-400 bg-green-500/20';

    function App() {
      const [view, setView] = useState('landing');
      const [platform, setPlatform] = useState(null);
      const [offerType, setOfferType] = useState(null);
      const [icp, setIcp] = useState('');
      const [linkedin, setLinkedin] = useState('');
      const [linkedinErr, setLinkedinErr] = useState(null);
      const [sending, setSending] = useState(false);
      const [inputs, setInputs] = useState({ url: '', image: null, imagePreview: null, copy: '', visual: '' });
      const [result, setResult] = useState(null);
      const [copied, setCopied] = useState({});
      const [error, setError] = useState(null);

      const hasInput = inputs.url.trim() || inputs.image || inputs.copy.length > 20;
      const canProceed = platform && offerType && icp.length > 10;

      const handleImage = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => setInputs(p => ({ ...p, image: file, imagePreview: reader.result }));
          reader.readAsDataURL(file);
        }
      };

      const copy = async (text, key) => {
        await navigator.clipboard.writeText(text);
        setCopied(p => ({ ...p, [key]: true }));
        setTimeout(() => setCopied(p => ({ ...p, [key]: false })), 2000);
      };

      const generate = async () => {
        setError(null);
        setView('processing');
        try {
          const res = await fetch('/api/roast', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ platform, offerType, icpDescription: icp, landingUrl: inputs.url, adCopy: inputs.copy, visualDescription: inputs.visual, hasImage: !!inputs.image })
          });
          const data = await res.json();
          if (!res.ok) throw new Error(data.error || 'API error');
          setResult(data);
          setView('linkedin');
        } catch (err) {
          setError(err.message);
          setView('input');
        }
      };

      const reset = () => {
        setView('landing'); setPlatform(null); setOfferType(null); setIcp('');
        setLinkedin(''); setLinkedinErr(null); setResult(null); setError(null);
        setInputs({ url: '', image: null, imagePreview: null, copy: '', visual: '' });
      };

      const submitLinkedIn = async () => {
        const v = validateLinkedIn(linkedin);
        if (!v.valid) { setLinkedinErr(v.error); return; }
        setLinkedinErr(null); setSending(true);
        await sendEmail({ linkedin, platform, offer: offerType, icp, score: result.overall_score, verdict: result.icp_mismatch, headlines: result.fix_kit.headlines, body: result.fix_kit.body, ctas: result.fix_kit.ctas });
        setSending(false); setView('results');
      };

      // LANDING
      if (view === 'landing') return (
        <div className="min-h-screen bg-gradient-to-br from-zinc-950 via-zinc-900 to-zinc-950 text-white overflow-auto">
          <div className="absolute top-20 left-10 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl pointer-events-none" />
          <div className="absolute bottom-20 right-10 w-80 h-80 bg-red-500/10 rounded-full blur-3xl pointer-events-none" />
          <div className="relative z-10 max-w-5xl mx-auto px-6 py-10">
            <header className="flex items-center gap-2 mb-16"><Icon name="flame" className="w-8 h-8 text-pink-500" /><span className="text-xl font-bold">AdRoast</span></header>
            <div className="text-center mb-16">
              <div className="inline-flex items-center gap-2 px-4 py-2 bg-pink-500/10 border border-pink-500/30 rounded-full mb-6"><Icon name="flame" className="w-4 h-4 text-pink-400" /><span className="text-pink-400 text-sm font-medium">For SaaS Founders Running Ads</span></div>
              <h1 className="text-4xl md:text-6xl font-bold mb-5 leading-tight">Your ads aren't converting.<br /><span className="text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-red-500 to-pink-400">Let's find out why.</span></h1>
              <p className="text-lg text-zinc-400 max-w-xl mx-auto mb-10">Get a brutally honest AI roast of your ads â€” analyzed against YOUR specific ICP.</p>
              <button onClick={() => setView('onboarding')} className="group inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-pink-500 to-red-500 rounded-xl font-semibold text-lg hover:scale-105 transition-transform shadow-lg shadow-pink-500/25"><Icon name="flame" className="w-5 h-5" />Roast My Ad<Icon name="chevronRight" className="w-5 h-5 group-hover:translate-x-1 transition-transform" /></button>
              <p className="text-zinc-500 mt-4 text-sm">Free â€¢ No signup required</p>
            </div>
            <div className="grid md:grid-cols-4 gap-4">
              {[{ icon: 'users', title: "ICP-Specific", desc: "Roast based on YOUR customer" },{ icon: 'alertCircle', title: "5 Issues", desc: "Scored 1-10 with quotes" },{ icon: 'zap', title: "Fix Kit", desc: "Ready-to-paste copy" },{ icon: 'sparkles', title: "Experiments", desc: "3 testable ideas" }].map((f, i) => (
                <div key={i} className="p-4 bg-zinc-900/50 border border-zinc-800/50 rounded-xl hover:border-pink-500/30 transition-colors"><Icon name={f.icon} className="w-7 h-7 text-pink-400 mb-3" /><h3 className="font-semibold mb-1 text-sm">{f.title}</h3><p className="text-zinc-500 text-xs">{f.desc}</p></div>
              ))}
            </div>
          </div>
        </div>
      );

      // ONBOARDING
      if (view === 'onboarding') return (
        <div className="min-h-screen bg-zinc-950 text-white flex items-center justify-center p-6">
          <div className="max-w-md w-full">
            <div className="text-center mb-10"><div className="flex items-center justify-center gap-2 mb-5"><Icon name="flame" className="w-7 h-7 text-pink-500" /><span className="text-lg font-bold">AdRoast</span></div><h1 className="text-2xl font-bold mb-2">Tell Us About Your Ad</h1></div>
            <div className="space-y-5">
              <div><label className="block text-sm font-medium text-zinc-300 mb-2 flex items-center gap-2"><Icon name="users" className="w-4 h-4 text-pink-400" />Who is your ad targeting?</label><textarea placeholder="e.g., Engineering managers at Series B+ startups frustrated with slow CI/CD..." value={icp} onChange={(e) => setIcp(e.target.value)} className="w-full h-24 px-4 py-3 bg-zinc-900 border border-zinc-700 rounded-xl text-sm focus:outline-none focus:border-pink-500 resize-none" /><p className="text-xs text-zinc-500 mt-1.5">Be specific: job title, company size, pain points</p></div>
              <div><label className="block text-sm font-medium text-zinc-400 mb-2">Platform</label><div className="grid grid-cols-3 gap-2">{['Meta', 'Google', 'LinkedIn'].map((p) => (<button key={p} onClick={() => setPlatform(p.toLowerCase())} className={`p-3 rounded-xl border-2 font-medium text-sm ${platform === p.toLowerCase() ? 'border-pink-500 bg-pink-500/10 text-pink-400' : 'border-zinc-800 hover:border-zinc-700 text-zinc-300'}`}>{p}</button>))}</div></div>
              <div><label className="block text-sm font-medium text-zinc-400 mb-2">Offer Type</label><div className="grid grid-cols-2 gap-2">{[{ id: 'demo', label: 'Book a Demo' }, { id: 'trial', label: 'Free Trial' }].map((o) => (<button key={o.id} onClick={() => setOfferType(o.id)} className={`p-3 rounded-xl border-2 text-sm font-medium ${offerType === o.id ? 'border-pink-500 bg-pink-500/10 text-pink-400' : 'border-zinc-800 hover:border-zinc-700 text-zinc-300'}`}>{o.label}</button>))}</div></div>
              <button onClick={() => setView('input')} disabled={!canProceed} className={`w-full py-3 rounded-xl font-semibold flex items-center justify-center gap-2 ${canProceed ? 'bg-gradient-to-r from-pink-500 to-red-500 hover:scale-[1.02]' : 'bg-zinc-800 text-zinc-500 cursor-not-allowed'}`}>Continue <Icon name="chevronRight" className="w-5 h-5" /></button>
            </div>
          </div>
        </div>
      );

      // INPUT
      if (view === 'input') return (
        <div className="min-h-screen bg-zinc-950 text-white p-5 overflow-auto">
          <div className="max-w-3xl mx-auto">
            <div className="flex items-center justify-between mb-6"><div className="flex items-center gap-2"><Icon name="flame" className="w-7 h-7 text-pink-500" /><span className="text-lg font-bold">AdRoast</span></div><div className="flex gap-2"><span className="px-2 py-1 bg-zinc-800 rounded text-xs capitalize">{platform}</span><span className="px-2 py-1 bg-zinc-800 rounded text-xs capitalize">{offerType}</span></div></div>
            <div className="mb-6 p-3 bg-pink-500/10 border border-pink-500/30 rounded-xl"><div className="flex items-start gap-2"><Icon name="users" className="w-4 h-4 text-pink-400 mt-0.5" /><div><p className="text-sm text-pink-400 font-medium">Targeting: {icp.slice(0, 80)}{icp.length > 80 ? '...' : ''}</p><button onClick={() => setView('onboarding')} className="text-xs text-zinc-400 hover:text-white mt-1">Edit â†’</button></div></div></div>
            <div className="text-center mb-8"><h1 className="text-2xl font-bold mb-2">Feed the Fire</h1><p className="text-zinc-400 text-sm">Provide at least one input</p></div>
            {error && <div className="mb-5 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 flex items-center gap-2 text-sm"><Icon name="alertCircle" className="w-4 h-4" />{error}</div>}
            <div className="space-y-4 mb-6">
              <div className={`p-4 rounded-xl border ${inputs.url ? 'border-green-500/50 bg-green-500/5' : 'border-zinc-800 bg-zinc-900/30'}`}><div className="flex items-center gap-2 mb-3"><Icon name="link" className={`w-5 h-5 ${inputs.url ? 'text-green-400' : 'text-zinc-400'}`} /><span className="font-medium text-sm">Landing Page URL</span>{inputs.url && <Icon name="check" className="w-4 h-4 text-green-400 ml-auto" />}</div><input type="url" placeholder="https://your-landing-page.com" value={inputs.url} onChange={(e) => setInputs(p => ({ ...p, url: e.target.value }))} className="w-full px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg text-sm focus:outline-none focus:border-pink-500" /></div>
              <div className={`p-4 rounded-xl border ${inputs.image ? 'border-green-500/50 bg-green-500/5' : 'border-zinc-800 bg-zinc-900/30'}`}><div className="flex items-center gap-2 mb-3"><Icon name="upload" className={`w-5 h-5 ${inputs.image ? 'text-green-400' : 'text-zinc-400'}`} /><span className="font-medium text-sm">Ad Creative</span>{inputs.image && <Icon name="check" className="w-4 h-4 text-green-400 ml-auto" />}</div>{inputs.imagePreview ? (<div className="relative"><img src={inputs.imagePreview} alt="Ad" className="w-full h-28 object-cover rounded-lg" /><button onClick={() => setInputs(p => ({ ...p, image: null, imagePreview: null }))} className="absolute top-1 right-1 w-6 h-6 bg-zinc-900/80 rounded-full flex items-center justify-center"><Icon name="x" className="w-4 h-4" /></button></div>) : (<label className="block w-full py-6 border-2 border-dashed border-zinc-700 rounded-lg cursor-pointer hover:border-zinc-600 text-center"><Icon name="upload" className="w-5 h-5 mx-auto mb-1 text-zinc-500" /><span className="text-zinc-500 text-xs">Click to upload</span><input type="file" accept="image/*" onChange={handleImage} className="hidden" /></label>)}{inputs.image && <input type="text" placeholder="Describe the image..." value={inputs.visual} onChange={(e) => setInputs(p => ({ ...p, visual: e.target.value }))} className="w-full mt-3 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg text-sm focus:outline-none focus:border-pink-500" />}</div>
              <div className={`p-4 rounded-xl border ${inputs.copy.length > 20 ? 'border-green-500/50 bg-green-500/5' : 'border-zinc-800 bg-zinc-900/30'}`}><div className="flex items-center gap-2 mb-3"><Icon name="fileText" className={`w-5 h-5 ${inputs.copy.length > 20 ? 'text-green-400' : 'text-zinc-400'}`} /><span className="font-medium text-sm">Ad Copy</span>{inputs.copy.length > 20 && <Icon name="check" className="w-4 h-4 text-green-400 ml-auto" />}</div><textarea placeholder="Paste your ad headline and body copy..." value={inputs.copy} onChange={(e) => setInputs(p => ({ ...p, copy: e.target.value }))} className="w-full h-24 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg text-sm focus:outline-none focus:border-pink-500 resize-none" /></div>
            </div>
            <button onClick={generate} disabled={!hasInput} className={`w-full py-3 rounded-xl font-semibold flex items-center justify-center gap-2 ${hasInput ? 'bg-gradient-to-r from-pink-500 to-red-500 hover:scale-[1.01] shadow-lg shadow-pink-500/25' : 'bg-zinc-800 text-zinc-500 cursor-not-allowed'}`}><Icon name="flame" className="w-5 h-5" />Generate Roast</button>
          </div>
        </div>
      );

      // PROCESSING
      if (view === 'processing') return (
        <div className="min-h-screen bg-zinc-950 text-white flex items-center justify-center p-6">
          <div className="text-center">
            <div className="relative w-24 h-24 mx-auto mb-6"><div className="absolute inset-0 rounded-full border-4 border-zinc-800" /><div className="absolute inset-0 rounded-full border-4 border-pink-500 border-t-transparent animate-spin" /><Icon name="flame" className="absolute inset-0 m-auto w-10 h-10 text-pink-500" /></div>
            <h2 className="text-xl font-bold mb-3">Roasting your ad...</h2>
            <div className="space-y-2 text-zinc-400 text-sm"><p className="animate-pulse">Checking ICP alignment...</p><p className="animate-pulse">Finding messaging gaps...</p><p className="animate-pulse">Generating rewrites...</p></div>
          </div>
        </div>
      );

      // LINKEDIN GATE
      if (view === 'linkedin') {
        const v = linkedin ? validateLinkedIn(linkedin) : { valid: false };
        return (
          <div className="min-h-screen bg-zinc-950 text-white flex items-center justify-center p-6">
            <div className="max-w-md w-full">
              <div className="text-center mb-8"><div className="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center"><Icon name="flame" className="w-8 h-8 text-white" /></div><h1 className="text-2xl font-bold mb-2">Your Roast is Ready! ðŸ”¥</h1><p className="text-zinc-400 text-sm">One last step</p></div>
              <div className="p-6 bg-zinc-900/50 border border-zinc-800 rounded-2xl mb-6">
                <div className="flex items-center gap-3 mb-4"><div className="w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center"><Icon name="linkedin" className="w-5 h-5 text-blue-400" /></div><div><h3 className="font-semibold">Drop your LinkedIn</h3><p className="text-zinc-500 text-xs">I review every roast personally. No spam.</p></div></div>
                <input type="url" placeholder="https://linkedin.com/in/yourprofile" value={linkedin} onChange={(e) => { setLinkedin(e.target.value); setLinkedinErr(null); }} className={`w-full px-4 py-3 bg-zinc-900 border rounded-xl text-sm focus:outline-none ${linkedinErr ? 'border-red-500' : v.valid ? 'border-green-500' : 'border-zinc-700 focus:border-pink-500'}`} />
                {linkedinErr && <p className="text-red-400 text-xs mt-2 flex items-center gap-1"><Icon name="alertCircle" className="w-3 h-3" />{linkedinErr}</p>}
                {v.valid && !linkedinErr && <p className="text-green-400 text-xs mt-2 flex items-center gap-1"><Icon name="check" className="w-3 h-3" />Valid LinkedIn URL</p>}
              </div>
              <div className="p-4 bg-zinc-900/30 border border-zinc-800/50 rounded-xl mb-6"><p className="text-zinc-500 text-xs mb-2">Preview:</p><div className="flex items-center justify-between"><span className="text-zinc-300 text-sm">Overall Score</span><span className={`px-2 py-1 rounded text-sm font-bold ${getScoreColor(result?.overall_score)}`}>{result?.overall_score}/10</span></div></div>
              <button onClick={submitLinkedIn} disabled={!linkedin || sending} className={`w-full py-4 rounded-xl font-semibold flex items-center justify-center gap-2 ${linkedin && !sending ? 'bg-gradient-to-r from-pink-500 to-rose-500 hover:scale-[1.02] shadow-lg shadow-pink-500/25' : 'bg-zinc-800 text-zinc-500 cursor-not-allowed'}`}>{sending ? <><Icon name="loader" className="w-5 h-5" />Unlocking...</> : <><Icon name="sparkles" className="w-5 h-5" />See My Roast</>}</button>
            </div>
          </div>
        );
      }

      // RESULTS
      if (view === 'results' && result) return (
        <div className="min-h-screen bg-zinc-950 text-white p-5 overflow-auto">
          <div className="max-w-4xl mx-auto">
            <div className="flex items-center justify-between mb-6"><div className="flex items-center gap-2"><Icon name="flame" className="w-7 h-7 text-pink-500" /><span className="text-lg font-bold">AdRoast</span></div><button onClick={reset} className="flex items-center gap-1 px-3 py-1.5 bg-gradient-to-r from-pink-500 to-red-500 rounded-lg text-xs font-medium"><Icon name="rotateCcw" className="w-3 h-3" />New Roast</button></div>
            <div className="mb-4 p-2 bg-zinc-900/50 border border-zinc-800 rounded-lg"><p className="text-xs text-zinc-500"><span className="text-zinc-400">ICP:</span> {icp.slice(0, 100)}</p></div>
            <div className="p-5 bg-gradient-to-r from-pink-500/10 to-red-500/10 border border-pink-500/30 rounded-2xl mb-6">
              <div className="flex items-start justify-between"><div><div className="flex gap-2 mb-3"><span className="px-2 py-0.5 bg-zinc-800 rounded text-xs capitalize">{platform}</span><span className="px-2 py-0.5 bg-zinc-800 rounded text-xs capitalize">{offerType}</span></div><h1 className="text-xl font-bold mb-2">The Verdict</h1><p className="text-pink-400 font-medium">"{result.icp_mismatch}"</p></div><div className="text-center"><div className={`w-16 h-16 rounded-xl flex items-center justify-center text-2xl font-bold ${getScoreColor(result.overall_score)}`}>{result.overall_score}</div><span className="text-xs text-zinc-400">/10</span></div></div>
            </div>
            <div className="mb-6"><h2 className="font-bold mb-3 flex items-center gap-2 text-sm"><Icon name="alertCircle" className="w-4 h-4 text-pink-400" />5 Critical Issues</h2><div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-3">{result.issues.map((issue, i) => (<div key={i} className="p-3 bg-zinc-900/50 border border-zinc-800 rounded-xl"><div className="flex items-start justify-between mb-2"><span className="font-medium text-xs">{issue.title}</span><span className={`px-1.5 py-0.5 rounded text-xs font-medium ${getScoreColor(issue.score)}`}>{issue.score}</span></div><p className="text-zinc-400 text-xs">{issue.explanation}</p></div>))}</div></div>
            <div className="mb-6"><h2 className="font-bold mb-3 flex items-center gap-2 text-sm"><Icon name="zap" className="w-4 h-4 text-pink-400" />Fix Kit</h2>
              <div className="grid sm:grid-cols-2 gap-4">
                <div className="p-4 bg-zinc-900/50 border border-zinc-800 rounded-xl"><h3 className="font-medium text-xs text-zinc-400 uppercase mb-3">Headlines</h3><div className="space-y-2">{result.fix_kit.headlines.map((h, i) => (<div key={i} className="flex items-center justify-between p-2 bg-zinc-800/50 rounded-lg group"><span className="text-sm">{h}</span><button onClick={() => copy(h, `h-${i}`)} className="opacity-0 group-hover:opacity-100 p-1.5 hover:bg-zinc-700 rounded"><Icon name={copied[`h-${i}`] ? 'check' : 'copy'} className={`w-3 h-3 ${copied[`h-${i}`] ? 'text-green-400' : ''}`} /></button></div>))}</div></div>
                <div className="space-y-3">
                  <div className="p-4 bg-zinc-900/50 border border-zinc-800 rounded-xl"><div className="flex items-center justify-between mb-2"><h3 className="font-medium text-xs text-zinc-400 uppercase">Body</h3><button onClick={() => copy(result.fix_kit.body, 'body')} className="p-1.5 hover:bg-zinc-800 rounded"><Icon name={copied.body ? 'check' : 'copy'} className={`w-3 h-3 ${copied.body ? 'text-green-400' : ''}`} /></button></div><p className="text-sm text-zinc-300">{result.fix_kit.body}</p></div>
                  <div className="p-4 bg-zinc-900/50 border border-zinc-800 rounded-xl"><h3 className="font-medium text-xs text-zinc-400 uppercase mb-2">CTAs</h3><div className="flex flex-wrap gap-2">{result.fix_kit.ctas.map((cta, i) => (<button key={i} onClick={() => copy(cta, `cta-${i}`)} className="px-3 py-1.5 bg-pink-500/20 text-pink-400 rounded-lg text-sm font-medium hover:bg-pink-500/30 flex items-center gap-1.5">{cta}<Icon name={copied[`cta-${i}`] ? 'check' : 'copy'} className="w-3 h-3" /></button>))}</div></div>
                </div>
              </div>
              <div className="mt-3 p-3 bg-zinc-800/30 rounded-lg"><p className="text-xs text-zinc-400"><span className="text-pink-400 font-medium">Why:</span> {result.fix_kit.rationale}</p></div>
            </div>
            <div className="mb-6"><h2 className="font-bold mb-3 flex items-center gap-2 text-sm"><Icon name="sparkles" className="w-4 h-4 text-pink-400" />3 Experiments</h2><div className="grid sm:grid-cols-3 gap-3">{result.experiments.map((exp, i) => (<div key={i} className="p-3 bg-zinc-900/50 border border-zinc-800 rounded-xl"><div className="flex items-center gap-2 mb-2"><div className="w-5 h-5 rounded-full bg-pink-500/20 flex items-center justify-center text-pink-400 text-xs font-bold">{i + 1}</div><h3 className="font-medium text-sm">{exp.title}</h3></div><p className="text-zinc-400 text-xs">{exp.description}</p></div>))}</div></div>
            <div className="p-4 bg-zinc-900/50 border border-zinc-800 rounded-xl"><h2 className="font-bold mb-3 flex items-center gap-2 text-sm"><Icon name="arrowRight" className="w-4 h-4 text-pink-400" />Next Steps</h2><div className="space-y-2">{result.next_steps.map((step, i) => (<label key={i} className="flex items-center gap-2 cursor-pointer group"><input type="checkbox" className="w-4 h-4 rounded border-zinc-600 bg-zinc-800 text-pink-500" /><span className="text-zinc-300 text-sm group-hover:text-white">{step}</span></label>))}</div></div>
          </div>
        </div>
      );

      return null;
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
